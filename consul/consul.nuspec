<?xml version="1.0"?>
<package xmlns="http://schemas.microsoft.com/packaging/2011/08/nuspec.xsd">
  <metadata>
    <id>consul</id>
    <version>1.20.0</version>
    <title>Consul</title>
    <authors>Mitchell Hashimoto, Armon Dadgar, HashiCorp</authors>
    <owners>cleung2010, flcdrg</owners>
    <licenseUrl>https://github.com/hashicorp/consul/blob/master/LICENSE</licenseUrl>
    <projectUrl>http://www.consul.io</projectUrl>
    <projectSourceUrl>https://github.com/hashicorp/consul</projectSourceUrl>
    <packageSourceUrl>https://github.com/flcdrg/au-packages/tree/master/consul</packageSourceUrl>
    <docsUrl>https://developer.hashicorp.com/consul/docs</docsUrl>
    <bugTrackerUrl>https://github.com/hashicorp/consul/issues</bugTrackerUrl>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <description>
Consul is a tool for service discovery and configuration. Consul is distributed, highly available, and extremely scalable.
Uses NSSM as the service wrapper. More info at: https://nssm.cc/

#### Package Parameters
The package parameters can be set - 

 * `/noservice` - Disables installation of Windows service
 * `/apiaddr` - Sets environment variable `CONSUL_HTTP_ADDR` for easy execute commands on remote agent
 * `/agentargs` - Sets up [Consul agent options via commandline](https://developer.hashicorp.com/consul/docs/agent/config/cli-flags) for Consul agent service

These parameters can be passed to the installer with the use of `--params`.
For example:
 * `--params="'/noservice /apiaddr=http://10.0.0.1:8500'"`
 * `--params="'/agentargs=""-config-file %PROGRAMDATA%\consul\dsc-config\default.json -client 10.0.0.1""'"` (be cautious of quotes)

For setting Consul agent CLI options, it is better dropping a `config.hcl` into `%PROGRAMDATA%\consul\config` instead of setting them with package parameters.
    </description><releaseNotes><![CDATA[### 1.20.0 (October 14, 2024)

SECURITY:

* Explicitly set 'Content-Type' header to mitigate XSS vulnerability. [[GH-21704](https://github.com/hashicorp/consul/issues/21704)]
* Implement HTML sanitization for user-generated content to prevent XSS attacks in the UI. [[GH-21711](https://github.com/hashicorp/consul/issues/21711)]
* UI: Remove codemirror linting due to package dependency [[GH-21726](https://github.com/hashicorp/consul/issues/21726)]
* Upgrade Go to use 1.22.7. This addresses CVE 
[CVE-2024-34155](https://nvd.nist.gov/vuln/detail/CVE-2024-34155) [[GH-21705](https://github.com/hashicorp/consul/issues/21705)]
* Upgrade to support aws/aws-sdk-go `v1.55.5 or higher`. This resolves CVEs
[CVE-2020-8911](https://nvd.nist.gov/vuln/detail/cve-2020-8911) and 
[CVE-2020-8912](https://nvd.nist.gov/vuln/detail/cve-2020-8912). [[GH-21684](https://github.com/hashicorp/consul/issues/21684)]
* ui: Pin a newer resolution of Braces [[GH-21710](https://github.com/hashicorp/consul/issues/21710)]
* ui: Pin a newer resolution of Codemirror [[GH-21715](https://github.com/hashicorp/consul/issues/21715)]
* ui: Pin a newer resolution of Markdown-it [[GH-21717](https://github.com/hashicorp/consul/issues/21717)]
* ui: Pin a newer resolution of ansi-html [[GH-21735](https://github.com/hashicorp/consul/issues/21735)]

FEATURES:

* grafana: added the dashboards service-to-service dashboard, service dashboard, and consul dataplane dashboard [[GH-21806](https://github.com/hashicorp/consul/issues/21806)]
* server: remove v2 tenancy, catalog, and mesh experiments [[GH-21592](https://github.com/hashicorp/consul/issues/21592)]

IMPROVEMENTS:

* security: upgrade ubi base image to 9.4 [[GH-21750](https://github.com/hashicorp/consul/issues/21750)]
* connect: Add Envoy 1.31 and 1.30 to support matrix [[GH-21616](https://github.com/hashicorp/consul/issues/21616)]

BUG FIXES:

* jwt-provider: change dns lookup family from the default of AUTO which would prefer ipv6 to ALL if LOGICAL_DNS is used or PREFER_IPV4 if STRICT_DNS is used to gracefully handle transitions to ipv6. [[GH-21703](https://github.com/hashicorp/consul/issues/21703)]

]]></releaseNotes>
    <summary>Consul is a tool for service discovery, monitoring and configuration.</summary>
    <iconUrl>https://cdn.rawgit.com/calvn/chocolatey-consul/master/icons/consul.png</iconUrl>
    
    <copyright>HashiCorp 2019</copyright>
    <tags>consul service consul.io</tags>
    <dependencies>
      <dependency id="NSSM" version="2.24.0" />
    </dependencies>
  </metadata>
  <files>
    <file src="tools\**" target="tools" />
  </files>
</package>
